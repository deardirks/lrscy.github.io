<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'true', 'auto');
ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>LeetCode 159 Longest Substring with At Most Two Distinct Characters | Meow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="LeetCode,Solution">
    <meta name="description" content="CodeThe solution of problem 159 is showed below. You can also find it here. 1234567891011121314151617181920212223242526272829class Solution &amp;#123;public:    int lengthOfLongestSubstringTwoDistinct(str">
<meta name="keywords" content="LeetCode,Solution">
<meta property="og:type" content="article">
<meta property="og:title" content="LeetCode 159 Longest Substring with At Most Two Distinct Characters">
<meta property="og:url" content="https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/index.html">
<meta property="og:site_name" content="Meow">
<meta property="og:description" content="CodeThe solution of problem 159 is showed below. You can also find it here. 1234567891011121314151617181920212223242526272829class Solution &amp;#123;public:    int lengthOfLongestSubstringTwoDistinct(str">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-01-27T17:14:40.354Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LeetCode 159 Longest Substring with At Most Two Distinct Characters">
<meta name="twitter:description" content="CodeThe solution of problem 159 is showed below. You can also find it here. 1234567891011121314151617181920212223242526272829class Solution &amp;#123;public:    int lengthOfLongestSubstringTwoDistinct(str">
    
        <link rel="alternate" type="application/atom+xml" title="Meow" href="../../../../atom.xml">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(../../../../img/brand.jpg)">
      <div class="brand">
        <a href="../../../../index.html" class="avatar waves-effect waves-circle waves-light">
          <img src="../../../../img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Meow</h5>
          <a href="mailto:ruosenlee@gmail.com" title="ruosenlee@gmail.com" class="mail">ruosenlee@gmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="../../../../index.html">
                <i class="icon icon-lg icon-home"></i>
                Homepage
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="../../../../archives">
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="../../../../tags">
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="../../../../categories">
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="../../../../links">
                <i class="icon icon-lg icon-link"></i>
                Links
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/lrscy" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">LeetCode 159 Longest Substring with At Most Two Distinct Characters</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">LeetCode 159 Longest Substring with At Most Two Distinct Characters</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-01-27T16:47:14.000Z" itemprop="datePublished" class="page-time">
  2019-01-27
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="../../../../categories/LeetCode/">LeetCode</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Code"><span class="post-toc-number">1.</span> <span class="post-toc-text">Code</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Solution"><span class="post-toc-number">2.</span> <span class="post-toc-text">Solution</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Valuable-Method"><span class="post-toc-number">3.</span> <span class="post-toc-text">Valuable Method</span></a></li></ol>
        </nav>
    </aside>


<article id="post-LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">LeetCode 159 Longest Substring with At Most Two Distinct Characters</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-01-27 11:47:14" datetime="2019-01-27T16:47:14.000Z" itemprop="datePublished">2019-01-27</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="../../../../categories/LeetCode/">LeetCode</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><p>The solution of problem 159 is showed below. You can also find it <a href="https://github.com/lrscy/LeetCode/blob/master/Algorithm/159-Longest%20Substring%20with%20At%20Most%20Two%20Distinct%20Characters.cpp" target="_blank" rel="noopener">here</a>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">class Solution &#123;</span><br><span class="line">public:</span><br><span class="line">    int lengthOfLongestSubstringTwoDistinct(string s) &#123;</span><br><span class="line">        int ret = 0, len = s.length();</span><br><span class="line">        int i = 0, j = 0;</span><br><span class="line">        unordered_map&lt;int, int&gt; mp;</span><br><span class="line">        if( s.size() &lt;= 2 ) return s.size();</span><br><span class="line">        while( j &lt; len ) &#123;</span><br><span class="line">            mp[s[j]] = j;</span><br><span class="line">            if( mp.size() &gt; 2 ) &#123;</span><br><span class="line">                ret = max( ret, j - i );</span><br><span class="line">                while( mp.size() &gt; 2 ) &#123;</span><br><span class="line">                    int key, n = INT_MAX;</span><br><span class="line">                    for( auto it = mp.begin(); it != mp.end(); ++it ) &#123;</span><br><span class="line">                        if( it-&gt;second &lt; n ) &#123;</span><br><span class="line">                            n = it-&gt;second;</span><br><span class="line">                            key = it-&gt;first;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    i = n + 1;</span><br><span class="line">                    mp.erase( key );</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ++j;</span><br><span class="line">        &#125;</span><br><span class="line">        ret = max( ret, j - i );</span><br><span class="line">        return ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h1><p>To solve the problem, you need to build a <strong>map</strong> to store <strong>the last position</strong> of each unique element and use <strong>sliding window</strong> to get the final result.</p>
<p>The sliding window means that expanding the right side of the window first until exceeding the limit, three unique elements, then querying each element in map and kicking the most left element out. In this way, the window starts sliding until the end of the string.</p>
<h1 id="Valuable-Method"><a href="#Valuable-Method" class="headerlink" title="Valuable Method"></a>Valuable Method</h1><p>At the first time, I use map to store number of elements in a sliding window rather than their position. It’s OK but stores an useless information–number. Also, my first try will scan the whole string twice which slows down the whole program. However, if we just store the position of each element, we just need to scan the whole string once and also get the right result. It’s also a kind of optimization on constant, which reduces the time complexity from O(2N) to O(N).</p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2019-01-27T17:14:40.354Z" itemprop="dateUpdated">2019-01-27 12:14:40</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="https://lrscy.github.io">
            <img src="../../../../img/avatar.jpg" alt="Meow">
            Meow
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../../tags/LeetCode/">LeetCode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../../../../tags/Solution/">Solution</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/&title=《LeetCode 159 Longest Substring with At Most Two Distinct Characters》 — Meow&pic=https://lrscy.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/&title=《LeetCode 159 Longest Substring with At Most Two Distinct Characters》 — Meow&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《LeetCode 159 Longest Substring with At Most Two Distinct Characters》 — Meow&url=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/&via=https://lrscy.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="waves-block waves-effect next">
      <a href="../LeetCode-146-LRU-Cache/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">LeetCode 146 LRU Cache</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'true' == 'true',
            appId: "flgn5yN4nyhhyKPBimaT89Q8-gzGzoHsz",
            appKey: "4yw3zmlMB7KjyFIzwIlYUnKz",
            avatar: "mm",
            placeholder: "Just go go",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->




</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        UV：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        PV：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="../../../../atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Meow &copy; 2015 - 2019</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/&title=《LeetCode 159 Longest Substring with At Most Two Distinct Characters》 — Meow&pic=https://lrscy.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/&title=《LeetCode 159 Longest Substring with At Most Two Distinct Characters》 — Meow&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《LeetCode 159 Longest Substring with At Most Two Distinct Characters》 — Meow&url=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/&via=https://lrscy.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://lrscy.github.io/2019/01/27/LeetCode-159-Longest-Substring-with-At-Most-Two-Distinct-Characters/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADQklEQVR42u3aQW7jQAwEwPz/097zIrDVTTqANS6dAliWpsYHZtj8+Ymvx6/r9afP7kne8vuZ+bfefGFjY2PfhP14eT1bRHJnzkg2LrkzsWBjY2Ofyk7KSV4X2ifnG/dsC/I3YmNjY2MnD22LSlK08gKGjY2NjT0rRbNGT3LkyNeGjY2N/c3stjC0kUDeKmojij/vpWFjY2N/PHvTKvq0v/8k38bGxsb+YPajvPIW0uuSM2sbtdHv0ydgY2NjH8TOC8B+C5KAdtZCatePjY2NfR67/cJ+mCb/O49yNxEFNjY29n3Zr8tPuwVJVLAJhtt2/8UJDBsbG/sIdg7LX9xuZXKA2YTE0TZhY2NjH8FODhv7gZtZi2o/oHMxr4SNjY19c/amrfP6nn0MsCl+F60obGxs7CPYs6b/pgi1YzftcSVqRWFjY2MfxE6OE0WTfXF/vrn5YOgwGMDGxsa+FTtvweTtpE0QuxnESdbwX93GxsbGPoL9d42eNjbIC1I77lMfQrCxsbFvxZ4B2g1qC+Fss4rOPzY2NvZB7LyE5IBZ2ZtFCG1QjY2NjX0ee/bPfbuvSdMqvzP/eS56adjY2NgHsdtBmU0h2QcAmyev5oOwsbGxP5LdNoOSoZl8KiZvJM1KXRESYGNjY9+WnTf626XnYe0GP4w0sLGxsQ9i5y2evFzlDanZQSLf6ItDCzY2NvYR7PzWtqHfblYbOc8i5CiFxsbGxr4tO2/l5DFAssR8GGgfY1w0lbCxsbFvzi7yhLgh1RbCtl2VN62eTiphY2NjH8ROgt7kZZsCk0/XzFaLjY2NfR4777HMXtbGA7PYIC/DRW6MjY2NfUP2fmhm1gxqwW1cEeXb2NjY2Eew26g1/9d/drBpm0f1gQcbGxv7aHYb9OYh677wtAeVooBhY2Nj35A9i1fzT98bDO+POqtUGRsbG/sj2bMC8K4DRlvS3jayg42NjX0ce0aaRbPt8Wa/BmxsbOzvYbejMJtQdtYYmh0tsLGxsbHbCCEpTvvvtj9SPWGEjY2N/TXspIWUHC3yMKAtgdHIDjY2NvYR7M3Y5QYzC3TzT9/QS8PGxsb+ePaqNRNsXL5Zs9LYhtPY2NjYB7H/AeieU+9uyoOvAAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = 'Where are you!';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)Hi! Welcome Back!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
